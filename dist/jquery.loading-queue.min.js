(function(e){var r="loadingQueue",i=[],n=!1,a=function(){var e=i.shift();if(e){if(n=!0,!e.image.is("img"))return e.def.reject(e.image),a(),void 0;var r=e.image.data("src");e.image.on("load",function(){e.def.resolve(e.image),a()}).on("error",function(){e.def.reject(e.image),a()}).attr("src",r)}else n=!1},t=function(r){var n=e.Deferred();return i.push({def:n,image:e(r)}),n.promise()};e.fn[r]=function(){var r=t(e(this));return n||a(),r}})(jQuery);